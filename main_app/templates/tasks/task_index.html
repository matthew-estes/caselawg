{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CaseLawg Tasks Index</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
    <link href='{% static 'css/bootstrap.min.css' %}' rel='stylesheet'>
  </head>

  <body>
    <h1>{{ case.name }} Case 1 Tasks</h1>
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          {% if tasks %} 
          <div class="card border-info ms-4 me-4 mb-4">
            <div class="card-header">{{ case.name }} Case 1 Tasks</div>
            <div class="card-body">
              <p class="card-text">
                <div class'table-responsive'>
                    <table class="table table-hover">
                        <thead>
                          <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Type</th>
                            <th scope="col">Status</th>
                            <th scope="col">Description</th>
                            <th scope="col">Date Created</th>
                            <th scope="col">Date Closed</th>
                            <th scope="col">Estimated Time</th>
                            <th scope="col">Actual Time</th>
                            <th scope="col">Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                            {% for task in tasks %}
                          <tr>
                           <td>{{ task.task_name }}</td>
                           <td>{{ task.task_type }}</td>
                           <td>{{ task.task_status }}</td>
                           <td>{{ task.task_description }}</td>
                           <td>{{ task.date_created }}</td>
                           <td>{{ task.date_closed }}</td>
                           <td>{{ task.estimated_time }}</td>
                           <td>{{ task.actual_time }}</td>
                           <td>
                                <button type='button' class='btn btn-primary me-1' href='{% url 'task-detail' task.pk %}' data-bs-toggle='modal' data-bs-target='#myModal{{task.pk}}'><i class="fa-solid fa-arrow-up-right-from-square"></i></button>
                                <button type='button' class='btn btn-warning me-1' href='{% url 'task-update' task.pk %}' data-bs-toggle='modal' data-bs-target='#myModal{{task.pk}}'><i class="fa-regular fa-pen-to-square"></i></button>
                                <button type='button' class='btn btn-success me-1' href='{% url 'task-close' task.pk %}' data-bs-toggle='modal' data-bs-target='#myModal{{task.pk}}'><i class="fa-regular fa-square-check"></i></button>
                                <button type='button' class='btn btn-danger me-1' href='{% url 'task-delete' task.pk %}' data-bs-toggle='modal' data-bs-target='#myModal{{task.pk}}'><i class="fa-regular fa-trash-can"></i></button>
                           </td>
                          </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                </div>
              </p>
            </div>
          </div>
          {% else %} 
            <h4 class='alert alert-primary ms-4 me-4 mb-4'>{{ case.name }} Case 1 has no tasks!</h4>
          {% endif %}

        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
